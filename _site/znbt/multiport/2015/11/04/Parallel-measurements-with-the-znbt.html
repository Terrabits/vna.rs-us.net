<!DOCTYPE html> <html domain="http://vna.rs-us.net"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Parallel Measurements with the ZNBT</title> <meta name="author" content="Nick Lalic"> <meta name="keywords" content"Network, Analyzer, VNA, RF, Rohde, Schwarz, Software"> <meta name="description" content="SummaryBecause a ZNBT can have up to 24 true VNA ports, it can do something that a VNA and a switch matrix cannot: measure multiple devices in parallel. The ..."> <link rel="stylesheet" href="/css/main.css"> </head> <body> <div class="page-box"> <header> <div> <span> <a href="/index.html"><img src='/images/RSLogo2.svg'></a> <div class="header-text"> Rohde &amp; Schwarz North America <br/> Vector Network Analyzer Software </div> </span> </div> </header> <nav> <ul> <li><a href="/index.html">Home</a></li> <li><a href="/applications/">Applications</a></li> <li id="selected"><a href="/posts.html">Blog</a></li> <li><a href="/rsatoolbox.html">C++</a></li> <li><a href="/python/">Python</a></li> <li><a href="/contact.html">Contact</a></li> </ul> </nav> <div class="content single-column"> <div class="post"> <h1 class="title">Parallel Measurements with the ZNBT</h1> <h4 class="meta">Nov 4, 2015</h4> <h4 class="meta">Categories: znbt, multiport</h4> <article class="content"> <h1 id="summary">Summary</h1> <p>Because a ZNBT can have up to 24 true VNA ports, it can do something that a VNA and a switch matrix cannot: measure multiple devices in parallel. The ZNBT interface makes this easy to do for identical DUTs. But what if you want to measure DUTs with a varying number of ports, or you want to set up these measurements in your own software?</p> <h1 id="example-scenario">Example Scenario</h1> <p>For this example we will assume the following:</p> <ul> <li>A ZNBT with at least 8 ports</li> <li>A channel, <code>channel 1</code>, configured for measurement</li> <li>A device <code>DUT1</code> with 3 ports</li> <li>A device <code>DUT2</code> with 4 ports</li> <li>Logical port indexes are the same as the physical port</li> </ul> <h2 id="common-gotchas">Common Gotchas</h2> <p>Before I begin, I’d like to clarify a few things:</p> <p><strong>Parallel measurements must share the same measurement settings</strong><br/> Internally the ZNBT has a limited number of sources being used by all the physical ports (and DUTs). As such, it is not possible to measure devices in parallel with arbitrarily independent measurement settings. In this example, both DUTs are measured in <code>channel 1</code>, and as such share <code>channel 1</code>’s measurement settings.</p> <p><strong>Port assignments supersede channel settings</strong><br/> Another thing to keep in mind is that the port assignments for parallel measurement supersede any port assignments in the channel. So, if you have already created logical port assignments (for example, with balanced ports) they may get overwritten by these SCPI commands.</p> <h2 id="scpi-command-menu">SCPI Command Menu</h2> <p>All of the SCPI commands for parallel measurements can be found in the <code>SOURce:GROup</code> command menu. Here is a screenshot of the documentation from the ZNBT help menu.</p> <p>Note the location in help: <em>Command Reference &gt; SCPI Command Reference &gt; SOURce Commands &gt; SOURce:GROup</em></p> <p><img src="/images/posts/2015-11-04-Parallel-measurements-with-the-znbt/scpi_command_menu.PNG" alt="SCPI Command Menu"/></p> <h2 id="scpi-commands">SCPI Commands</h2> <p>In the terminology of the SCPI Command Menu, each DUT will have it’s own Port <code>Group</code>. The most straightforward command for defining each group is:</p> <p><img src="/images/posts/2015-11-04-Parallel-measurements-with-the-znbt/set_port_group.png" alt="Set Port Group"/></p> <p>Now we will create these port groups. I will assign <code>DUT1</code> to ports 1-3, and <code>DUT2</code> to ports 4-7.</p> <div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="s2">&quot;SOURce1:GROup1:PPORTs 1,2,3&quot;</span>
<span class="s2">&quot;SOURce1:GROup2:PORTs 4,5,6,7&quot;</span></code></pre></div> <p>Optionally, you can also give these groups names</p> <div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="s2">&quot;SOURce1:GROup1:NAME &#39;DUT1&#39;&quot;</span>
<span class="s2">&quot;SOURce1:GROup1:NAME &#39;DUT2&#39;&quot;</span></code></pre></div> <p>You can now use the normal SCPI commands to perform a sweep and query/save data.</p> </article> </div> </div> <footer> &copy; 2015 Rohde &amp; Schwarz North America. </footer> </div> </body> </html>